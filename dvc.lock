schema: '2.0'
stages:
  prepare:
    cmd: python src/steps/prepare.py data/raw/ data/prepared
    deps:
    - path: data/raw
      hash: md5
      md5: ed7dbcbdabddccca552e276f80fa29ad.dir
      size: 120753872
      nfiles: 3
    - path: src/steps/prepare.py
      hash: md5
      md5: 8c4f86156ec30178928a7305a15d3f5d
      size: 6498
    outs:
    - path: data/prepared
      hash: md5
      md5: fbb2478886b80cfe8c914cc7617c8b8b.dir
      size: 51048625
      nfiles: 1
  train:
    cmd: python src/steps/train.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 44de7985f7288e21e01f623224f027ca
      size: 4725251
    - path: data/split/train.csv
      hash: md5
      md5: 92bc7933f451a4820bd0c2e73ecfbbdd
      size: 11030230
    - path: src/steps/train.py
      hash: md5
      md5: 79ab831c73ba7f5d2ccd0c37804641f0
      size: 1072
    outs:
    - path: data/models
      hash: md5
      md5: e2da4bfca84bc2ac2f6edd82065fbd93.dir
      size: 115265
      nfiles: 1
  evaluate:
    cmd: python src/steps/evaluate.py data/split/test.csv data/prepared/preprocessed.csv
    deps:
    - path: data/models
      hash: md5
      md5: 84206f4d472ae0109d6643a72f38059b.dir
      size: 128813724
      nfiles: 4
    - path: data/prepared/preprocessed.csv
      hash: md5
      md5: 079954d1d68d9d9a93dd174e9e5481d8
      size: 51048735
    - path: data/split/test.csv
      hash: md5
      md5: 77165b7fc0eeb0972e924f30f36837a2
      size: 1989088
    - path: src/steps/evaluate.py
      hash: md5
      md5: 617d803982ca4ad6b72e11a1077eec6f
      size: 2074
    outs:
    - path: data/eval/metrics.json
      hash: md5
      md5: f8c0d12ab0141af909587b5de56415ce
      size: 1425
  split:
    cmd: python src/steps/split.py data/prepared/ data/split
    deps:
    - path: data/prepared
      hash: md5
      md5: fbb2478886b80cfe8c914cc7617c8b8b.dir
      size: 51048625
      nfiles: 1
    - path: src/steps/prepare.py
      hash: md5
      md5: 8c4f86156ec30178928a7305a15d3f5d
      size: 6498
    outs:
    - path: data/split
      hash: md5
      md5: 98eca589ae091bcbfc78afc6623cfba8.dir
      size: 18374381
      nfiles: 3
  train_baseline_model:
    cmd: python src/steps/train_baseline_model.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 7e2891c3d91710ed14cfc68e4fda69ed
      size: 5511951
    - path: data/split/train.csv
      hash: md5
      md5: b71c932f19ebe080237cb0c5e158cadf
      size: 12862273
    - path: src/steps/train_baseline_model.py
      hash: md5
      md5: 41fca3f81cf91e7b311bb21a7f53788c
      size: 303
    outs:
    - path: data/models/baseline
      hash: md5
      md5: 9e6dd7f5d04f68c427deeae676edde44.dir
      size: 115186
      nfiles: 1
  train_collaborative_filtering:
    cmd: python src/steps/train_collaborative_filtering.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 7e2891c3d91710ed14cfc68e4fda69ed
      size: 5511951
    - path: data/split/train.csv
      hash: md5
      md5: b71c932f19ebe080237cb0c5e158cadf
      size: 12862273
    - path: src/steps/train_collaborative_filtering.py
      hash: md5
      md5: c559f3ce0ce2d5af562197b18d93c3cd
      size: 284
    outs:
    - path: data/models/CollaborativeFiltering
      hash: md5
      md5: 0e08934ab3cb38e24cd7bd54582d71d0.dir
      size: 1579428215
      nfiles: 1
  train_factorization:
    cmd: python src/steps/train_factorization.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 7e2891c3d91710ed14cfc68e4fda69ed
      size: 5511951
    - path: data/split/train.csv
      hash: md5
      md5: b71c932f19ebe080237cb0c5e158cadf
      size: 12862273
    - path: src/steps/train_factorization.py
      hash: md5
      md5: 3677c13aa3d3820503475c9b733f4047
      size: 281
    outs:
    - path: data/models/MatrixFactorization
      hash: md5
      md5: 9c03db2a599d1d4842cb0c26d2d595d8.dir
      size: 1368523058
      nfiles: 1
  train_content_based:
    cmd: python src/steps/train_content_based_filtering.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 7e2891c3d91710ed14cfc68e4fda69ed
      size: 5511951
    - path: data/split/train.csv
      hash: md5
      md5: b71c932f19ebe080237cb0c5e158cadf
      size: 12862273
    - path: src/steps/train_content_based_filtering.py
      hash: md5
      md5: 65cc7b16f4e675b32b0948748fd3689d
      size: 283
    outs:
    - path: data/models/ContentBasedFiltering
      hash: md5
      md5: 0c1071b43952bd7a3540eabbe07a671a.dir
      size: 655284
      nfiles: 1
