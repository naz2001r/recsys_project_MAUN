schema: '2.0'
stages:
  prepare:
    cmd: python src/steps/prepare.py data/raw/ data/prepared
    deps:
    - path: data/raw
      hash: md5
      md5: ed7dbcbdabddccca552e276f80fa29ad.dir
      size: 120753872
      nfiles: 3
    - path: src/steps/prepare.py
      hash: md5
      md5: bcff259273b8b6a9e2a7e3f4cad9de0e
      size: 6501
    outs:
    - path: data/prepared
      hash: md5
      md5: 54eba0446447c95d2ee5e7f6f0c58eec.dir
      size: 44168372
      nfiles: 1
  train:
    cmd: python src/steps/train.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 57720f02a3b205618ec3022f30ab78ab
      size: 801084
    - path: data/split/train.csv
      hash: md5
      md5: 5985e0a23669913f60a4510d4b3e6ae2
      size: 1868191
    - path: src/steps/train.py
      hash: md5
      md5: 53c62a5d4e63ee6eddeb0ffefaaad2f8
      size: 1570
    outs:
    - path: data/models
      hash: md5
      md5: 786a8de8ebbc063ed6855b492d410e13.dir
      size: 110520530
      nfiles: 1
  evaluate:
    cmd: python src/steps/evaluate.py data/split/test.csv
    deps:
    - path: data/models
      hash: md5
      md5: c027351892f2abcf52d540cdf1fe012b.dir
      size: 2947135330
      nfiles: 4
    - path: data/split/test.csv
      hash: md5
      md5: 48ab49840233ce35b7f850d959a1905c
      size: 4767041
    - path: src/steps/evaluate.py
      hash: md5
      md5: 111510fb8790862efec1799b53685bec
      size: 2040
    outs:
    - path: data/eval/metrics.json
      hash: md5
      md5: e205d53b6f449b19ed159b1bde1e15c3
      size: 1423
  split:
    cmd: python src/steps/split.py data/prepared/ data/split
    deps:
    - path: data/prepared
      hash: md5
      md5: 54eba0446447c95d2ee5e7f6f0c58eec.dir
      size: 44168372
      nfiles: 1
    - path: src/steps/prepare.py
      hash: md5
      md5: bcff259273b8b6a9e2a7e3f4cad9de0e
      size: 6501
    outs:
    - path: data/split
      hash: md5
      md5: 2e312976b03e25e2b4533e4a5dc232d7.dir
      size: 15894905
      nfiles: 3
  train_baseline_model:
    cmd: python src/steps/train_baseline_model.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 48ab49840233ce35b7f850d959a1905c
      size: 4767041
    - path: data/split/train.csv
      hash: md5
      md5: 27c9ed3e1c67f0183247767c3d45a9ce
      size: 11127738
    - path: src/steps/train_baseline_model.py
      hash: md5
      md5: 41fca3f81cf91e7b311bb21a7f53788c
      size: 303
    outs:
    - path: data/models/baseline
      hash: md5
      md5: 6391d27f66d5f87739da28630a945044.dir
      size: 115186
      nfiles: 1
  train_collaborative_filtering:
    cmd: python src/steps/train_collaborative_filtering.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 48ab49840233ce35b7f850d959a1905c
      size: 4767041
    - path: data/split/train.csv
      hash: md5
      md5: 27c9ed3e1c67f0183247767c3d45a9ce
      size: 11127738
    - path: src/steps/train_collaborative_filtering.py
      hash: md5
      md5: c559f3ce0ce2d5af562197b18d93c3cd
      size: 284
    outs:
    - path: data/models/CollaborativeFiltering
      hash: md5
      md5: 38e2b3dea3e66f2a3cd95055f97fd6df.dir
      size: 1579428215
      nfiles: 1
  train_factorization:
    cmd: python src/steps/train_factorization.py data/split/train.csv data/split/test.csv
    deps:
    - path: data/split/test.csv
      hash: md5
      md5: 48ab49840233ce35b7f850d959a1905c
      size: 4767041
    - path: data/split/train.csv
      hash: md5
      md5: 27c9ed3e1c67f0183247767c3d45a9ce
      size: 11127738
    - path: src/steps/train_factorization.py
      hash: md5
      md5: 3677c13aa3d3820503475c9b733f4047
      size: 281
    outs:
    - path: data/models/MatrixFactorization
      hash: md5
      md5: 5a8c7cfde9e749da26d30fc37b28fd10.dir
      size: 1367476729
      nfiles: 1
